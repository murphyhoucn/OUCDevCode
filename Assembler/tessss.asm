CODESEGMENT
ASSUME CS:CODE
IOCONPT
IOBPT
IOAPT
EQU OFF2BH
EQU OFF29H
EQU OFF28H
ORG 1 IBOH
START:
MOV AL90H
MOV DX,IOCONPT
OUT DX.AL
NOP
NOP
NOP
IOLEDI:
MOV DXJOAvr
IN AL,DX
TEST AL I H
JNZ JILIANG
TEST AL2H
JNZ OULIANG
TEST AL .4H
JNZ XUNHUAN
TEST AL
JNZ LR
TEST AL , IOH
JNZ RL
JILIANG: MOV DX,IOBPT
MOV AL,OAAH
OUT DX,AL
MOV CX,OFFFFH
JMP DELAY
OULIANG: MOV DX,IOBPT
MOV AL55H
OUT DX,AL
MOV CX.OFFFFH
JMP DELAY
XUNHUAN: MOV DX,IOBPT
MOV AIOOAAH
OUT DX,AL
MOV CX,OFFFFH
JMP DELAYI
DELAY 1:
LOOP DELAY 1
MOV DX,IOBPT
MOV AL55H
OUT DX,AL
MOV CX,OFFFFH
JMP DELAY2
DELAY2:
J MP DELAY
LOOP DELAY2
LR: MOVDX,IOBPT
MOV ALOFEH
OKI: OUT DX,AL
MOV CX,OFFFFH
JMP DELAY3
DELAY3:
LOOP DELAY 3
ROLALI
TEST AL, IH
JNZ OKI
JMP DELAY
RI-: MOV DX,IOBPT
MOV AL,7FH
OK2: OUT DX.AL
MOV CX,OFFFFH
JMP DELAY4
DELAY4: LOOP DELAY4
ROR AL 1
TEST AL,80H
JNZ OK2
JMP DELAY
DELAY:
LOOP DELAY
JMP IOLEDI
CODE ENDS
END START